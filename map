<div>
	<h1 class="page_title">Centre Map</h1>
	<label class="store_select_label" for="store_select_container">Select a Store</label>
	<select class="mapper" id="store_select_container">
	    <script id="store_select_template" type="x-tmpl-mustache/text">
            <option value="{{x_coordinate}},{{y_coordinate}},{{id}}" data-value="{{name}}">{{name}}</option>
        </script>
	</select>
	<div id="parent_div">
		<div id="zoom_container_directory">
			<img alt="Store Directory Map" id="map_image" src=""/>
			<div class="landmarks" data-show-at-zoom="100" data-allow-drag="true"></div>
		</div>
	</div>
</div>
<div class="mobile_line_break"></div>
<script>
$(document).ready(function(e){
    init(e);
    function renderAll(){
        var stores = getStoresList();
        renderStoreList('#store_select_container','#store_select_template', stores, "stores");
        $(".mapper").prepend("<option selected>Select a Store</option>");

        $("#map_image").attr("src", getPNGMapURL())
		$('#map_image').smoothZoom({
			initial_POSITION: "0 0",
	    	pan_BUTTONS_SHOW: "NO",
	    	zoom_OUT_TO_FIT: "NO",
	     	button_SIZE: 34,
	        button_ALIGN: "top right",    
	     	container: 'zoom_container_directory',
	     	responsive: true,
	     	responsive_maintain_ratio: false,
	     	zoom_MAX: 300,
	     	zoom_MIN: 0
		});
    	show_png_pin(".mapper", "#map_image");
    	
    	setTimeout(function() {
            show_content();
        }, 500);
    }
    loadMallDataCached(renderAll);
})
</script>